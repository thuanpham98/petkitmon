{"version":3,"file":"chunk-petkitmon3.js","sources":["../src/domains/pokemons/constants.ts","../src/pages/pokemons/components/ItemPokemon.tsx","../src/pages/pokemons/index.tsx"],"sourcesContent":["export const pokemonTypeColor: Map<string, string> = new Map([\r\n  [\"normal\", \"#A8A77A\"],\r\n  [\"fire\", \"#EE8130\"],\r\n  [\"water\", \"#6390F0\"],\r\n  [\"electric\", \"#F7D02C\"],\r\n  [\"grass\", \"#7AC74C\"],\r\n  [\"ice\", \"#96D9D6\"],\r\n  [\"fighting\", \"#C22E28\"],\r\n  [\"poison\", \"#A33EA1\"],\r\n  [\"ground\", \"#E2BF65\"],\r\n  [\"flying\", \"#A98FF3\"],\r\n  [\"psychic\", \"#F95587\"],\r\n  [\"bug\", \"#A6B91A\"],\r\n  [\"rock\", \"#B6A136\"],\r\n  [\"ghost\", \"#735797\"],\r\n  [\"dragon\", \"#6F35FC\"],\r\n  [\"dark\", \"#705746\"],\r\n  [\"steel\", \"#B7B7CE\"],\r\n  [\"fairy\", \"#D685AD\"],\r\n]);\r\n","import { PokemonItemEntity } from \"@/domains/pokemons\";\r\nimport { FC } from \"react\";\r\nimport \"./style.less\";\r\nimport { RdImage, useRdApp, useRdQuery } from \"@radts/reactjs\";\r\nimport { AppRepository } from \"@/applications/services/app-repository\";\r\nimport axios from \"axios\";\r\n\r\ninterface ItemPokemonProps {\r\n  pokemon: PokemonItemEntity;\r\n  selectedType: Array<string>;\r\n}\r\n\r\nexport const ItemPokemon: FC<ItemPokemonProps> = ({\r\n  pokemon,\r\n  selectedType,\r\n}) => {\r\n  const { data, isLoading, isError } = useRdQuery({\r\n    queryKey: [\"get-pokemon\", selectedType.length, pokemon.name],\r\n    queryFn: async () => {\r\n      const rest = (await axios.get(`${pokemon.url}`)).data;\r\n      if (selectedType.length) {\r\n        const _types: string[] = rest.types.filter((e: any) => {\r\n          const _type: string = e.type.name;\r\n          return selectedType.includes(_type);\r\n        });\r\n        if (_types.length) {\r\n          return rest;\r\n        } else {\r\n          throw \"error\";\r\n        }\r\n      } else {\r\n        return rest;\r\n      }\r\n    },\r\n  });\r\n\r\n  if (isLoading || isError) {\r\n    return <></>;\r\n  }\r\n\r\n  return (\r\n    <div onClick={() => {}} className=\"item-pokemon\" key={pokemon.name}>\r\n      {data.sprites.other.showdown.front_shiny ||\r\n      data.sprites.other.official_artwork ? (\r\n        <img\r\n          src={\r\n            data.sprites.other.showdown.front_shiny ??\r\n            data.sprites.other.official_artwork\r\n          }\r\n        />\r\n      ) : (\r\n        <svg\r\n          viewBox=\"0 0 360 360\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n        >\r\n          <rect width=\"360\" height=\"360\" fill=\"url(#pattern0)\" />\r\n          <defs>\r\n            <pattern\r\n              id=\"pattern0\"\r\n              patternContentUnits=\"objectBoundingBox\"\r\n              width=\"1\"\r\n              height=\"1\"\r\n            >\r\n              <use xlinkHref=\"#image0_436_202765\" transform=\"scale(0.015625)\" />\r\n            </pattern>\r\n            <image\r\n              id=\"image0_436_202765\"\r\n              width=\"64\"\r\n              height=\"64\"\r\n              xlinkHref=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA40lEQVR4Xu3bQQ6EQAhEUbj/oXsO8Sdh4XOvJAi/qkF3Zt6E6710++xuiD6T40uACtACqYlzD2IACFKBkoHcgmSQDJJBMngKIT6ADygF6DSYfcCLTzg/z0eGrASogDbT0gKxB2MB5pkiBoBgrEEMwIBjLx9fAAiCIAhygmkkRgYjhWMHditsL2AvYC+QIHjdwzk+BmAABmBAWc1kCF0bKRAEQRAEQRAMGaACbaCUz/P5BRiKxhQaiV07uRjfYgQDMKDpGAhGCMUCzD4CBEEw1iAGYIBPZMJh+g8/P8cKpAJfV4EfMee/sLtaEFIAAAAASUVORK5CYII=\"\r\n            />\r\n          </defs>\r\n        </svg>\r\n      )}\r\n      <span>{pokemon.name}</span>\r\n    </div>\r\n  );\r\n};\r\n","import \"./style.less\";\r\nimport { rdLoading, useRdApp, useRdBloc, useRdQuery } from \"@radts/reactjs\";\r\nimport { AppRepository } from \"@/applications/services/app-repository\";\r\nimport { Environment } from \"@/applications/services/environment\";\r\nimport { pokemonTypeColor } from \"@/domains/pokemons\";\r\nimport { ItemPokemon } from \"./components/ItemPokemon\";\r\nimport { Pagination } from \"antd\";\r\n\r\ninterface PokemonsPageState {\r\n  selectedType: Array<string>;\r\n  pokemons: Set<string>;\r\n  page: number;\r\n  pageSize: number;\r\n}\r\n\r\nconst PokemonsPage = () => {\r\n  const { modules } = useRdApp();\r\n  const [state, setState] = useRdBloc<PokemonsPageState>({\r\n    selectedType: [],\r\n    pokemons: new Set<string>([]),\r\n    page: 0,\r\n    pageSize: 50,\r\n  });\r\n\r\n  const { data: dataType, isLoading: loadingType } = useRdQuery({\r\n    queryKey: [\"list-type-pokemon\"],\r\n    queryFn: async () => {\r\n      const rest =\r\n        (await modules\r\n          ?.get<AppRepository>(\"AppRepository\")\r\n          .poke.listPokemonTypes()) ?? [];\r\n      return rest\r\n        .filter((e) => e.name !== \"unknown\" && e.name !== \"shadow\")\r\n        .sort((a, b) => (a.name > b.name ? 1 : -1));\r\n    },\r\n  });\r\n\r\n  // const { data: dataPokemonByType, isLoading: loadingPokemonByType } =\r\n  //   useRdQuery({\r\n  //     queryKey: [\"list-pokemon-by-type\", state.selectedType],\r\n  //     enabled: !loadingType,\r\n  //     queryFn: async () => {\r\n  //       if (state.selectedType.length > 0) {\r\n  //         const ret = await modules\r\n  //           ?.get<AppRepository>(\"AppRepository\")\r\n  //           .poke.listPokemonsByType(state.selectedType[0]);\r\n  //         return ret ?? [];\r\n  //       } else {\r\n  //         state.pokemons.clear();\r\n  //         setState();\r\n  //         return [];\r\n  //       }\r\n  //     },\r\n  //   });\r\n\r\n  const {\r\n    data: dataPokemons,\r\n    isLoading: loadingPokemons,\r\n    isRefetching: fetchingPokemons,\r\n    refetch: refetchPokemons,\r\n  } = useRdQuery({\r\n    queryKey: [\"list-pokemon-page-size\", state.selectedType.length],\r\n    queryFn: async () => {\r\n      const ret = await modules\r\n        ?.get<AppRepository>(\"AppRepository\")\r\n        .poke.listPokemons({\r\n          offset: state.page * state.pageSize,\r\n          pageSize: state.pageSize,\r\n        });\r\n      return ret ?? null;\r\n    },\r\n  });\r\n\r\n  function onReset() {\r\n    state.selectedType = [];\r\n    setState();\r\n  }\r\n\r\n  if (loadingType) {\r\n    return <></>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"pokemon-page\">\r\n      <div className=\"pokemon-page__list-type\">\r\n        {dataType &&\r\n          dataType.map((d) => {\r\n            return (\r\n              <div\r\n                onClick={() => {\r\n                  if (state.selectedType.includes(d.name)) {\r\n                    state.selectedType = state.selectedType.filter(\r\n                      (e) => e !== d.name,\r\n                    );\r\n                  } else {\r\n                    state.selectedType.push(d.name);\r\n                  }\r\n                  setState();\r\n                }}\r\n                style={{\r\n                  borderColor: state.selectedType.includes(d.name)\r\n                    ? `${pokemonTypeColor.get(d.name)}`\r\n                    : undefined,\r\n                }}\r\n                className=\"item\"\r\n                key={d.name}\r\n              >\r\n                <img\r\n                  src={`${Environment.host}/icons/pokemon-types/${d.name}.svg`}\r\n                />\r\n                <span\r\n                  style={{\r\n                    color: `${pokemonTypeColor.get(d.name)}`,\r\n                  }}\r\n                >\r\n                  {d.name}\r\n                </span>\r\n              </div>\r\n            );\r\n          })}\r\n        <div\r\n          className=\"item\"\r\n          style={{\r\n            transition: \"none\",\r\n            transform: \"none\",\r\n            backgroundColor: \"transparent\",\r\n            boxShadow: \"none\",\r\n            cursor: \"auto\",\r\n          }}\r\n        >\r\n          <img\r\n            onClick={() => {\r\n              onReset();\r\n            }}\r\n            style={{ width: \"48px\", height: \"48px\", cursor: \"pointer\" }}\r\n            src={`${Environment.host}/icons/ic-reset.svg`}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {!loadingPokemons && dataPokemons && (\r\n        <Pagination\r\n          onChange={async (p, ps) => {\r\n            state.page = p - 1;\r\n            state.pageSize = ps;\r\n            await refetchPokemons();\r\n          }}\r\n          defaultCurrent={1}\r\n          defaultPageSize={50}\r\n          total={dataPokemons.total}\r\n        />\r\n      )}\r\n\r\n      <div className=\"pokemon-page__list-pokemons \">\r\n        {/* {loadingPokemonByType && !dataPokemonByType ? (\r\n          <></>\r\n        ) : (\r\n          <>\r\n            {dataPokemonByType?.map((pokemon) => {\r\n              return <ItemPokemon pokemon={pokemon} key={pokemon.name} />;\r\n            })}\r\n          </>\r\n        )} */}\r\n        {(loadingPokemons || fetchingPokemons) && !dataPokemons ? (\r\n          <></>\r\n        ) : (\r\n          <>\r\n            {dataPokemons?.data.map((pokemon) => {\r\n              return (\r\n                <ItemPokemon\r\n                  selectedType={state.selectedType}\r\n                  pokemon={pokemon}\r\n                  key={pokemon.name}\r\n                />\r\n              );\r\n            })}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PokemonsPage;\r\n"],"names":["pokemonTypeColor","ItemPokemon","pokemon","selectedType","data","isLoading","isError","useRdQuery","rest","axios","e","_type","jsx","Fragment","jsxs","PokemonsPage","modules","useRdApp","state","setState","useRdBloc","dataType","loadingType","b","dataPokemons","loadingPokemons","fetchingPokemons","refetchPokemons","onReset","d","Environment","Pagination","p","ps"],"mappings":"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"}