{"version":3,"file":"chunk-petkitmon3.js","sources":["../src/domains/pokemons/constants.ts","../src/components/loader/Loader.tsx","../src/pages/pokemons/components/ItemPokemon.tsx","../src/pages/pokemons/index.tsx"],"sourcesContent":["export const pokemonTypeColor: Map<string, string> = new Map([\r\n  [\"normal\", \"#A8A77A\"],\r\n  [\"fire\", \"#EE8130\"],\r\n  [\"water\", \"#6390F0\"],\r\n  [\"electric\", \"#F7D02C\"],\r\n  [\"grass\", \"#7AC74C\"],\r\n  [\"ice\", \"#96D9D6\"],\r\n  [\"fighting\", \"#C22E28\"],\r\n  [\"poison\", \"#A33EA1\"],\r\n  [\"ground\", \"#E2BF65\"],\r\n  [\"flying\", \"#A98FF3\"],\r\n  [\"psychic\", \"#F95587\"],\r\n  [\"bug\", \"#A6B91A\"],\r\n  [\"rock\", \"#B6A136\"],\r\n  [\"ghost\", \"#735797\"],\r\n  [\"dragon\", \"#6F35FC\"],\r\n  [\"dark\", \"#705746\"],\r\n  [\"steel\", \"#B7B7CE\"],\r\n  [\"fairy\", \"#D685AD\"],\r\n]);\r\n","import Lotie from \"lottie-react\";\r\nimport loaderLogo from \"./loties/loading-logo.json\";\r\n\r\nconst Loader = ({\r\n  width = 240,\r\n  height = 240,\r\n  data = loaderLogo,\r\n}: {\r\n  width?: number;\r\n  height?: number;\r\n  data?: unknown;\r\n}) => {\r\n  return (\r\n    <div\r\n      style={{\r\n        width: `${width}px`,\r\n        height: `${height}px`,\r\n      }}\r\n    >\r\n      <Lotie\r\n        width={`${width}px`}\r\n        height={`${height}px`}\r\n        animationData={data}\r\n        loop={true}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import { PokemonItemEntity, pokemonTypeColor } from \"@/domains/pokemons\";\r\nimport { FC } from \"react\";\r\nimport \"./style.less\";\r\nimport { RdImage, useRdApp, useRdQuery } from \"@radts/reactjs\";\r\nimport { AppRepository } from \"@/applications/services/app-repository\";\r\nimport axios from \"axios\";\r\nimport Loader from \"@/components/loader/Loader\";\r\n\r\ninterface ItemPokemonProps {\r\n  pokemon: PokemonItemEntity;\r\n  selectedType: Array<string>;\r\n}\r\n\r\nexport const ItemPokemon: FC<ItemPokemonProps> = ({\r\n  pokemon,\r\n  selectedType,\r\n}) => {\r\n  const { data, isLoading } = useRdQuery({\r\n    queryKey: [\"get-pokemon\", selectedType.length, pokemon.name],\r\n    queryFn: async () => {\r\n      const rest = (await axios.get(`${pokemon.url}`)).data;\r\n      if (selectedType.length) {\r\n        const _types: string[] = rest.types.filter((e: any) => {\r\n          const _type: string = e.type.name;\r\n          return selectedType.includes(_type);\r\n        });\r\n        if (_types.length && selectedType.length === _types.length) {\r\n          return rest;\r\n        } else {\r\n          return null;\r\n        }\r\n      } else {\r\n        return rest;\r\n      }\r\n    },\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <>\r\n        <Loader />\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div onClick={() => {}} className=\"item-pokemon\" key={pokemon.name}>\r\n      {data?.sprites?.other?.showdown?.front_shiny ||\r\n      data?.sprites?.other?.official_artwork ? (\r\n        <img\r\n          src={\r\n            data?.sprites?.other?.showdown?.front_shiny ??\r\n            data?.sprites?.other?.official_artwork\r\n          }\r\n        />\r\n      ) : (\r\n        <svg\r\n          viewBox=\"0 0 360 360\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n        >\r\n          <rect width=\"360\" height=\"360\" fill=\"url(#pattern0)\" />\r\n          <defs>\r\n            <pattern\r\n              id=\"pattern0\"\r\n              patternContentUnits=\"objectBoundingBox\"\r\n              width=\"1\"\r\n              height=\"1\"\r\n            >\r\n              <use xlinkHref=\"#image0_436_202765\" transform=\"scale(0.015625)\" />\r\n            </pattern>\r\n            <image\r\n              id=\"image0_436_202765\"\r\n              width=\"64\"\r\n              height=\"64\"\r\n              xlinkHref=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA40lEQVR4Xu3bQQ6EQAhEUbj/oXsO8Sdh4XOvJAi/qkF3Zt6E6710++xuiD6T40uACtACqYlzD2IACFKBkoHcgmSQDJJBMngKIT6ADygF6DSYfcCLTzg/z0eGrASogDbT0gKxB2MB5pkiBoBgrEEMwIBjLx9fAAiCIAhygmkkRgYjhWMHditsL2AvYC+QIHjdwzk+BmAABmBAWc1kCF0bKRAEQRAEQRAMGaACbaCUz/P5BRiKxhQaiV07uRjfYgQDMKDpGAhGCMUCzD4CBEEw1iAGYIBPZMJh+g8/P8cKpAJfV4EfMee/sLtaEFIAAAAASUVORK5CYII=\"\r\n            />\r\n          </defs>\r\n        </svg>\r\n      )}\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          flexDirection: \"row\",\r\n          width: \"100%\",\r\n          gap: \"8px\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        {data &&\r\n          data?.types &&\r\n          data?.types.map((d: any) => {\r\n            return (\r\n              <span\r\n                key={d.type.name}\r\n                style={{\r\n                  backgroundColor: `${pokemonTypeColor.get(d.type.name)}`,\r\n                  padding: \"4px\",\r\n                  borderRadius: \"24px\",\r\n                  color: \"#FFFFFF\",\r\n                  fontSize: \"12px\",\r\n                  fontWeight: \"500\",\r\n                }}\r\n              >\r\n                {d.type.name}\r\n              </span>\r\n            );\r\n          })}\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          width: \"100%\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <span style={{ fontWeight: \"600\" }}>{pokemon.name}</span>\r\n        <span style={{ fontWeight: \"400\" }}>{` (${\r\n          data?.weight ? data?.weight / 10 : \"---\"\r\n        }kg/${data?.height ? data?.height / 10 : \"---\"}m)`}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import \"./style.less\";\r\nimport { useRdApp, useRdBloc, useRdQuery } from \"@radts/reactjs\";\r\nimport { AppRepository } from \"@/applications/services/app-repository\";\r\nimport { Environment } from \"@/applications/services/environment\";\r\nimport { PokemonItemEntity, pokemonTypeColor } from \"@/domains/pokemons\";\r\nimport { ItemPokemon } from \"./components/ItemPokemon\";\r\nimport { Pagination } from \"antd\";\r\nimport Loader from \"@/components/loader/Loader\";\r\n\r\ninterface PokemonsPageState {\r\n  selectedType: Array<string>;\r\n  pokemons: Set<string>;\r\n  page: number;\r\n  pageSize: number;\r\n}\r\n\r\nconst PokemonsPage = () => {\r\n  const { modules } = useRdApp();\r\n  const [state, setState] = useRdBloc<PokemonsPageState>({\r\n    selectedType: [],\r\n    pokemons: new Set<string>([]),\r\n    page: 0,\r\n    pageSize: 50,\r\n  });\r\n\r\n  const { data: dataType, isLoading: loadingType } = useRdQuery({\r\n    queryKey: [\"list-type-pokemon\"],\r\n    queryFn: async () => {\r\n      const rest =\r\n        (await modules\r\n          ?.get<AppRepository>(\"AppRepository\")\r\n          .poke.listPokemonTypes()) ?? [];\r\n      return rest\r\n        .filter((e) => e.name !== \"unknown\" && e.name !== \"shadow\")\r\n        .sort((a, b) => (a.name > b.name ? 1 : -1));\r\n    },\r\n  });\r\n\r\n  const {\r\n    data: dataPokemons,\r\n    isLoading: loadingPokemons,\r\n    isRefetching: fetchingPokemons,\r\n    refetch: refetchPokemons,\r\n  } = useRdQuery({\r\n    queryKey: [\"list-pokemon-page-size\", state.selectedType.length],\r\n    queryFn: async () => {\r\n      if (state.selectedType.length > 0) {\r\n        const _callbacks = state.selectedType.map((url) => {\r\n          return modules\r\n            ?.get<AppRepository>(\"AppRepository\")\r\n            .poke.listPokemonsByType(url);\r\n        });\r\n        const ret = await Promise.all(_callbacks);\r\n        const temp: PokemonItemEntity[] = Array.prototype.concat(...ret);\r\n        const uniquePokemons: PokemonItemEntity[] = [\r\n          ...new Set(temp.map((obj) => JSON.stringify(obj))),\r\n        ].map((str) => JSON.parse(str));\r\n\r\n        return {\r\n          total: temp.length,\r\n          data: uniquePokemons.splice(\r\n            state.page * state.pageSize,\r\n            state.pageSize,\r\n          ),\r\n        };\r\n      }\r\n      const ret = await modules\r\n        ?.get<AppRepository>(\"AppRepository\")\r\n        .poke.listPokemons({\r\n          offset: state.page * state.pageSize,\r\n          pageSize: state.pageSize,\r\n        });\r\n      return ret ?? null;\r\n    },\r\n  });\r\n\r\n  function onSelecType(name: string) {\r\n    if (state.selectedType.includes(name)) {\r\n      state.selectedType = state.selectedType.filter((e) => e !== name);\r\n      state.page = 0;\r\n      setState();\r\n    } else if (state.selectedType.length < 2) {\r\n      state.selectedType.push(name);\r\n      state.page = 0;\r\n      setState();\r\n    }\r\n  }\r\n\r\n  if (loadingType) {\r\n    return <></>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"pokemon-page\">\r\n      <div className=\"pokemon-page__list-type\">\r\n        {dataType &&\r\n          dataType.map((d) => {\r\n            return (\r\n              <button\r\n                onClick={() => {\r\n                  onSelecType(d.name);\r\n                }}\r\n                style={{\r\n                  borderColor: state.selectedType.includes(d.name)\r\n                    ? `${pokemonTypeColor.get(d.name)}`\r\n                    : undefined,\r\n                }}\r\n                className=\"item\"\r\n                key={d.name}\r\n              >\r\n                <img\r\n                  src={`${Environment.host}/icons/pokemon-types/${d.name}.svg`}\r\n                />\r\n                <span\r\n                  style={{\r\n                    color: `${pokemonTypeColor.get(d.name)}`,\r\n                  }}\r\n                >\r\n                  {d.name}\r\n                </span>\r\n              </button>\r\n            );\r\n          })}\r\n      </div>\r\n\r\n      {!loadingPokemons && dataPokemons && (\r\n        <Pagination\r\n          onChange={async (p, ps) => {\r\n            state.page = p - 1;\r\n            state.pageSize = ps;\r\n            await refetchPokemons();\r\n          }}\r\n          defaultCurrent={state.page}\r\n          defaultPageSize={state.pageSize}\r\n          total={dataPokemons.total}\r\n        />\r\n      )}\r\n\r\n      <div className=\"pokemon-page__list-pokemons \">\r\n        {loadingPokemons || fetchingPokemons ? (\r\n          <>\r\n            <Loader />\r\n          </>\r\n        ) : (\r\n          <>\r\n            {dataPokemons?.data.map((pokemon) => {\r\n              return (\r\n                <ItemPokemon\r\n                  selectedType={state.selectedType}\r\n                  pokemon={pokemon}\r\n                  key={pokemon.name}\r\n                />\r\n              );\r\n            })}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PokemonsPage;\r\n"],"names":["pokemonTypeColor","Loader","width","height","data","loaderLogo","jsx","Lotie","ItemPokemon","pokemon","selectedType","isLoading","useRdQuery","rest","axios","_types","e","_type","Fragment","jsxs","d","PokemonsPage","modules","useRdApp","state","setState","useRdBloc","dataType","loadingType","a","b","dataPokemons","loadingPokemons","fetchingPokemons","refetchPokemons","_callbacks","url","ret","temp","uniquePokemons","obj","str","onSelecType","name","Environment","Pagination","p","ps"],"mappings":"sHAAa,MAAAA,MAA4C,IAAI,CAC3D,CAAC,SAAU,SAAS,EACpB,CAAC,OAAQ,SAAS,EAClB,CAAC,QAAS,SAAS,EACnB,CAAC,WAAY,SAAS,EACtB,CAAC,QAAS,SAAS,EACnB,CAAC,MAAO,SAAS,EACjB,CAAC,WAAY,SAAS,EACtB,CAAC,SAAU,SAAS,EACpB,CAAC,SAAU,SAAS,EACpB,CAAC,SAAU,SAAS,EACpB,CAAC,UAAW,SAAS,EACrB,CAAC,MAAO,SAAS,EACjB,CAAC,OAAQ,SAAS,EAClB,CAAC,QAAS,SAAS,EACnB,CAAC,SAAU,SAAS,EACpB,CAAC,OAAQ,SAAS,EAClB,CAAC,QAAS,SAAS,EACnB,CAAC,QAAS,SAAS,CACrB,CAAC;;;;;;qiBChBKC,EAAS,CAAC,CACd,MAAAC,EAAQ,IACR,OAAAC,EAAS,IACT,KAAAC,EAAOC,CACT,IAMIC,EAAA,IAAC,MAAA,CACC,MAAO,CACL,MAAO,GAAGJ,CAAK,KACf,OAAQ,GAAGC,CAAM,IACnB,EAEA,SAAAG,EAAA,IAACC,EAAA,CACC,MAAO,GAAGL,CAAK,KACf,OAAQ,GAAGC,CAAM,KACjB,cAAeC,EACf,KAAM,EAAA,CACR,CAAA,CAAA,ECXOI,EAAoC,CAAC,CAChD,QAAAC,EACA,aAAAC,CACF,IAAM,CACJ,KAAM,CAAE,KAAAN,EAAM,UAAAO,CAAU,EAAIC,EAAW,CACrC,SAAU,CAAC,cAAeF,EAAa,OAAQD,EAAQ,IAAI,EAC3D,QAAS,SAAY,CACb,MAAAI,GAAQ,MAAMC,EAAM,IAAI,GAAGL,EAAQ,GAAG,EAAE,GAAG,KACjD,GAAIC,EAAa,OAAQ,CACvB,MAAMK,EAAmBF,EAAK,MAAM,OAAQG,GAAW,CAC/C,MAAAC,EAAgBD,EAAE,KAAK,KACtB,OAAAN,EAAa,SAASO,CAAK,CAAA,CACnC,EACD,OAAIF,EAAO,QAAUL,EAAa,SAAWK,EAAO,OAC3CF,EAEA,IACT,KAEO,QAAAA,CAEX,CAAA,CACD,EAED,OAAIF,EAEAL,EAAA,IAAAY,EAAA,SAAA,CACE,SAACZ,EAAA,IAAAL,EAAA,CAAA,CAAO,CACV,CAAA,EAKFkB,OAAC,MAAI,CAAA,QAAS,IAAM,CAAA,EAAI,UAAU,eAC/B,SAAA,CAAAf,GAAM,SAAS,OAAO,UAAU,aACjCA,GAAM,SAAS,OAAO,iBACpBE,EAAA,IAAC,MAAA,CACC,IACEF,GAAM,SAAS,OAAO,UAAU,aAChCA,GAAM,SAAS,OAAO,gBAAA,CAAA,EAI1Be,EAAA,KAAC,MAAA,CACC,QAAQ,cACR,KAAK,OACL,MAAM,6BACN,WAAW,+BAEX,SAAA,CAAAb,MAAC,QAAK,MAAM,MAAM,OAAO,MAAM,KAAK,iBAAiB,SACpD,OACC,CAAA,SAAA,CAAAA,EAAA,IAAC,UAAA,CACC,GAAG,WACH,oBAAoB,oBACpB,MAAM,IACN,OAAO,IAEP,SAACA,EAAA,IAAA,MAAA,CAAI,UAAU,qBAAqB,UAAU,kBAAkB,CAAA,CAClE,EACAA,EAAA,IAAC,QAAA,CACC,GAAG,oBACH,MAAM,KACN,OAAO,KACP,UAAU,oZAAA,CACZ,CAAA,EACF,CAAA,CAAA,CACF,EAEFA,EAAA,IAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,cAAe,MACf,MAAO,OACP,IAAK,MACL,WAAY,QACd,EAEC,YACCF,GAAM,OACNA,GAAM,MAAM,IAAKgB,GAEbd,EAAA,IAAC,OAAA,CAEC,MAAO,CACL,gBAAiB,GAAGN,EAAiB,IAAIoB,EAAE,KAAK,IAAI,CAAC,GACrD,QAAS,MACT,aAAc,OACd,MAAO,UACP,SAAU,OACV,WAAY,KACd,EAEC,WAAE,KAAK,IAAA,EAVHA,EAAE,KAAK,IAAA,CAajB,CAAA,CACL,EAEAD,EAAA,KAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,cAAe,SACf,MAAO,OACP,WAAY,QACd,EAEA,SAAA,CAAAb,MAAC,QAAK,MAAO,CAAE,WAAY,KAAM,EAAI,WAAQ,KAAK,EAClDA,EAAAA,IAAC,QAAK,MAAO,CAAE,WAAY,KAAM,EAAI,cACnCF,GAAM,OAASA,GAAM,OAAS,GAAK,KACrC,MAAMA,GAAM,OAASA,GAAM,OAAS,GAAK,KAAK,IAAK,CAAA,CAAA,CAAA,CACrD,CAAA,GA7EoDK,EAAQ,IA8E9D,CAEJ,EC9GMY,EAAe,IAAM,CACnB,KAAA,CAAE,QAAAC,GAAYC,IACd,CAACC,EAAOC,CAAQ,EAAIC,EAA6B,CACrD,aAAc,CAAC,EACf,SAAU,IAAI,IAAY,EAAE,EAC5B,KAAM,EACN,SAAU,EAAA,CACX,EAEK,CAAE,KAAMC,EAAU,UAAWC,CAAA,EAAgBhB,EAAW,CAC5D,SAAU,CAAC,mBAAmB,EAC9B,QAAS,UAEJ,MAAMU,GACH,IAAmB,eAAe,EACnC,KAAK,iBAAiB,GAAM,IAE9B,OAAQN,GAAMA,EAAE,OAAS,WAAaA,EAAE,OAAS,QAAQ,EACzD,KAAK,CAACa,EAAGC,IAAOD,EAAE,KAAOC,EAAE,KAAO,EAAI,EAAG,CAC9C,CACD,EAEK,CACJ,KAAMC,EACN,UAAWC,EACX,aAAcC,EACd,QAASC,GACPtB,EAAW,CACb,SAAU,CAAC,yBAA0BY,EAAM,aAAa,MAAM,EAC9D,QAAS,SAAY,CACf,GAAAA,EAAM,aAAa,OAAS,EAAG,CACjC,MAAMW,EAAaX,EAAM,aAAa,IAAKY,GAClCd,GACH,IAAmB,eAAe,EACnC,KAAK,mBAAmBc,CAAG,CAC/B,EACKC,EAAM,MAAM,QAAQ,IAAIF,CAAU,EAClCG,EAA4B,MAAM,UAAU,OAAO,GAAGD,CAAG,EACzDE,EAAsC,CAC1C,GAAG,IAAI,IAAID,EAAK,IAAKE,GAAQ,KAAK,UAAUA,CAAG,CAAC,CAAC,CAAA,EACjD,IAAKC,GAAQ,KAAK,MAAMA,CAAG,CAAC,EAEvB,MAAA,CACL,MAAOH,EAAK,OACZ,KAAMC,EAAe,OACnBf,EAAM,KAAOA,EAAM,SACnBA,EAAM,QACR,CAAA,CAEJ,CAOA,OANY,MAAMF,GACd,IAAmB,eAAe,EACnC,KAAK,aAAa,CACjB,OAAQE,EAAM,KAAOA,EAAM,SAC3B,SAAUA,EAAM,QAAA,CACjB,GACW,IAChB,CAAA,CACD,EAED,SAASkB,EAAYC,EAAc,CAC7BnB,EAAM,aAAa,SAASmB,CAAI,GAClCnB,EAAM,aAAeA,EAAM,aAAa,OAAQR,GAAMA,IAAM2B,CAAI,EAChEnB,EAAM,KAAO,EACJC,KACAD,EAAM,aAAa,OAAS,IAC/BA,EAAA,aAAa,KAAKmB,CAAI,EAC5BnB,EAAM,KAAO,EACJC,IAEb,CAEA,OAAIG,EACOtB,EAAA,IAAAY,WAAA,CAAA,CAAA,EAITC,EAAA,KAAC,MAAI,CAAA,UAAU,eACb,SAAA,CAAAb,MAAC,OAAI,UAAU,0BACZ,YACCqB,EAAS,IAAKP,GAEVD,EAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbuB,EAAYtB,EAAE,IAAI,CACpB,EACA,MAAO,CACL,YAAaI,EAAM,aAAa,SAASJ,EAAE,IAAI,EAC3C,GAAGpB,EAAiB,IAAIoB,EAAE,IAAI,CAAC,GAC/B,MACN,EACA,UAAU,OAGV,SAAA,CAAAd,EAAA,IAAC,MAAA,CACC,IAAK,GAAGsC,EAAY,IAAI,wBAAwBxB,EAAE,IAAI,MAAA,CACxD,EACAd,EAAA,IAAC,OAAA,CACC,MAAO,CACL,MAAO,GAAGN,EAAiB,IAAIoB,EAAE,IAAI,CAAC,EACxC,EAEC,SAAEA,EAAA,IAAA,CACL,CAAA,CAAA,EAXKA,EAAE,IAAA,CAcZ,EACL,EAEC,CAACY,GAAmBD,GACnBzB,EAAA,IAACuC,EAAA,CACC,SAAU,MAAOC,EAAGC,IAAO,CACzBvB,EAAM,KAAOsB,EAAI,EACjBtB,EAAM,SAAWuB,EACjB,MAAMb,EAAgB,CACxB,EACA,eAAgBV,EAAM,KACtB,gBAAiBA,EAAM,SACvB,MAAOO,EAAa,KAAA,CACtB,QAGD,MAAI,CAAA,UAAU,+BACZ,SAAAC,GAAmBC,EAEhB3B,EAAAA,IAAAY,EAAA,SAAA,CAAA,SAAAZ,EAAAA,IAACL,EAAO,EAAA,CAAA,CACV,EAGGK,EAAAA,IAAAY,EAAA,SAAA,CAAA,SAAAa,GAAc,KAAK,IAAKtB,GAErBH,EAAA,IAACE,EAAA,CACC,aAAcgB,EAAM,aACpB,QAAAf,CAAA,EACKA,EAAQ,IAAA,CAGlB,EACH,CAEJ,CAAA,CACF,CAAA,CAAA,CAEJ"}